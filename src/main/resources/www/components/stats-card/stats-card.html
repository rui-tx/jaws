<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- Generic Stats Card Component -->
    <div th:fragment="stats-card(title, endpoint, refreshable)" id="stats-card"
         class="bg-white rounded-lg shadow border border-gray-200">
        <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
            <div class="flex items-center space-x-3">
                <i data-feather="bar-chart" class="h-5 w-5 text-gray-400"></i>
                <h2 class="text-lg font-medium text-gray-900" th:text="${title}">Statistics</h2>
            </div>
            <button th:if="${refreshable}"
                class="inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
                th:attr="hx-get=${endpoint}"
                hx-headers='{"Content-Type": "application/json"}'
                hx-indicator="#stats-spinner"
                hx-swap="innerHTML transition:true"
                hx-trigger="click" 
                hx-target="#stats-content"
                title="Refresh statistics">
                <i data-feather="refresh-cw" class="h-4 w-4"></i>
            </button>
        </div>
        <div class="p-6">
            <div id="stats-content"
                 th:if="${endpoint != null}"
                 th:attr="hx-get=${endpoint}"
                 hx-headers='{"Content-Type": "application/json"}'
                 hx-indicator="#stats-spinner"
                 hx-swap="innerHTML transition:true"
                 hx-trigger="load">
                <!-- Initial loading state -->
                <div class="flex justify-center py-4">
                    <img alt="Loading..." class="h-8 w-8" src="https://htmx.org/img/bars.svg"/>
                </div>
            </div>
            <div th:if="${endpoint != null}" class="flex justify-center py-4 htmx-indicator" id="stats-spinner">
                <img alt="Loading..." class="h-8 w-8" src="https://htmx.org/img/bars.svg"/>
            </div>
            <div th:if="${endpoint == null}">
                <slot></slot>
            </div>
        </div>
    </div>
</body>
</html> 