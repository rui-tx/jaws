<!-- Breadcrumb Section -->
<section class="bg-white border-b border-gray-200 px-6 py-4">
    <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
            <nav class="flex" aria-label="Breadcrumb">
                <ol class="flex items-center space-x-2">
                    <li>
                        <span class="text-sm font-medium text-gray-900" th:text="${currentUser}">User Name</span>
                    </li>
                    <li>
                        <span class="text-gray-400">/</span>
                    </li>
                    <li>
                        <span class="text-sm text-gray-500">Logs</span>
                    </li>
                </ol>
            </nav>
        </div>
        <div class="flex items-center space-x-3">
            <!-- Log Level Filter -->
            <div class="flex items-center space-x-2">
                <select id="level-filter" class="block w-40 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm">
                    <option value="">All Levels</option>
                    <option value="ERROR">Error</option>
                    <option value="WARN">Warning</option>
                    <option value="INFO">Info</option>
                    <option value="DEBUG">Debug</option>
                    <option value="TRACE">Trace</option>
                </select>
                <button id="filter-button" class="inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                    <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z" />
                    </svg>
                    Filter
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Hero Section -->
<section class="bg-gradient-to-r from-primary-600 to-primary-700 text-white">
    <div class="px-6 py-8">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold">Application Logs</h1>
                <p class="mt-2 text-primary-100">Monitor and analyze system activity</p>
            </div>
            <div class="hidden lg:block">
                <i data-feather="file-text" class="h-16 w-16 text-primary-200"></i>
            </div>
        </div>
    </div>
</section>

<!-- Main Content Section -->
<section class="px-6 py-6">
    <div class="bg-white rounded-lg shadow border border-gray-200">
        <div th:if="${canAccessRoles == 'true'}"
        th:replace="~{components/data-table/data-table.html :: data-table(
            title='Logs',
            icon='file-text',
            endpoint='/htmx/backoffice/logs',
            refreshable=true
        )}">
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const filterButton = document.getElementById('filter-button');
    const levelFilter = document.getElementById('level-filter');
    const logsTableBody = document.getElementById('logs-table-body');

    if (filterButton && levelFilter && logsTableBody) {
        filterButton.addEventListener('click', function () {
            const level = levelFilter.value;
            const baseUrl = '/htmx/backoffice/logs?page=0&size=25&sort=timestamp&direction=DESC';
            const url = level ? `${baseUrl}&level=${encodeURIComponent(level)}` : baseUrl;
            
            htmx.ajax('GET', url, {
                target: '#logs-table-body',
                headers: {
                    'Authorization': 'Bearer ' + localStorage.getItem('auth_token')
                }
            });
        });

        // Allow Enter key to trigger filter
        levelFilter.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                filterButton.click();
            }
        });
    }
});
</script> 